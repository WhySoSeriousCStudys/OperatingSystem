> 
> 기존 내용
> 
# 정의
프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행 중인 작업을 즉시 중단하고, 발생된 상황에 대한 우선 처리가 필요함을 CPU에게 알리는 것
지금 수행 중인 일보다 더 중요한 일(ex. 입출력, 우선 순위 연산 등)이 발생하면 그 일을 먼저 처리하고 나서 하던 일을 계속해야한다.
외부/내부 인터럽트는 CPU의 하드웨어 신호에 의해 발생
소프트웨어 인터럽트는 명령어의 수행에 의해 발생

# 외부 인터럽트
입출력 장치, 타이밍 장치, 전원 등 외부적인 요인으로 발생
전원 이상, 기계 착오, 외부 신호, 입출력

# 내부 인터럽트
Trap이라고 부르며, 잘못된 명령이나 데이터를 사용할 때 발생
0으로 나누기가 발생, 오버플로우, 명령어를 잘못 사용한 경우 (Exception)

# 소프트웨어 인터럽트
프로그램 처리 중 명령의 요청에 의해 발생한 것 (SVC 인터럽트)
사용자가 프로그램을 실행시킬 때 발생
소프트웨어 이용 중에 다른 프로세스를 실행시키면 시분할 처리를 위해 자원 할당 동작이 수행된다.

# 인터럽트 발생 처리 과정

주 프로그램이 실행되다가 인터럽트가 발생했다.
현재 수행 중인 프로그램을 멈추고, 상태 레지스터와 PC 등을 스택에 잠시 저장한 뒤에 인터럽트 서비스 루틴으로 간다. (잠시 저장하는 이유는, 인터럽트 서비스 루틴이 끝난 뒤 다시 원래 작업으로 돌아와야 하기 때문)
만약 인터럽트 기능이 없었다면, 컨트롤러는 특정한 어떤 일을 할 시기를 알기 위해 계속 체크를 해야 한다. (이를 폴링(Polling)이라고 한다)
폴링을 하는 시간에는 원래 하던 일에 집중할 수가 없게 되어 많은 기능을 제대로 수행하지 못하는 단점이 있었다.
즉, 컨트롤러가 입력을 받아들이는 방법(우선순위 판별방법)에는 두가지가 있다.

# 폴링 방식
사용자가 명령어를 사용해 입력 핀의 값을 계속 읽어 변화를 알아내는 방식
인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아 이에 맞는 인터럽트 서비스 루틴을 수행한다. (하드웨어에 비해 속도 느림)

# 인터럽트 방식
MCU 자체가 하드웨적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식
Daisy Chain
병렬 우선순위 부여
인터럽트 방식은 하드웨어로 지원을 받아야 하는 제약이 있지만, 폴링에 비해 신속하게 대응하는 것이 가능하다. 따라서 실시간 대응이 필요할 때는 필수적인 기능이다.
즉, 인터럽트는 발생시기를 예측하기 힘든 경우에 컨트롤러가 가장 빠르게 대응할 수 있는 방법이다.



> 
> 정리 내용
>

사용자의 I/O 입력 또는 오버플로을 받아 프로그램이 중단되는 것을 인터럽트라고 함
인터럽트 처리: 인터럽트가 들어온 바로 그 즉시 처리되는 것은 아님
시스템에서 정의된 것에 따라 처리됨
- 현재 CPU가 처리하고 있던 일의 진행사항을 저장한다
- 인터럽트 코드의 실행을 위해 CPU에 기존에 할당 되어있던 작업과 인터럽트 처리될 작업을 교환한다(Context switch)
- CPU에서 교환된 인터럽트 코드의 처리를 마친다
- 이전 작업을 CPU에 다시 할당한다
- 이전에 중단되었던 곳부터 다시 진행한다



> 
> 김덕수 교수님 (한국기술교육대학교) 정리 내용
>

# 인터럽트
예상하지 못한, 외부에서 발생한 이벤트

## 인터럽트 처리 과정
![image](https://user-images.githubusercontent.com/59429729/184534390-e84c007a-c278-4fd0-8403-20f58fdba3bb.png)
인터럽트가 발생하면 커널이 개입하여 context saving(흐름을 저장)한다. 인터럽트가 어디서, 왜 발생했는지 파악 후 서비스.
서비스가 끝나면, 프로세스가 중단 된 상태임. ready상태인 프로세스 중 하나가 들어와서, context restoring(문맥 복구)한다.

# context switching (문맥 교환)

### context
프로세스와 관련된 정보들의 집합
- CPU register context -> in CPU
- code & data, stack, PCB -> in memory

### context saving
현재 프로세스의 register context를 저장하는 작업

### context restoring
register context를 프로세스로 복구하는 작업

### context switching 
실행중인 프로세스의 context를 저장하고, 앞으로 실행할 프로세스의 context를 복구하는 일
- 커널의 개입으로 이루어짐

# context switching overhead

### context switching에 소요되는 비용
os마다 다르며, os의 성능에 큰 영향을 준다
불필요한 context switching을 줄이는 것이 중요하다 -> 스레드의 사용 등



> 
> [OLC] kernel of linux (고건 교수) 7강 interrupt(1)
>
